import{s as r,y as d}from"./request-6d47a533.js";import{c as I,y as m,i as p,$ as h}from"./index-03a63030.js";import{a as u}from"./axios-db0ed51e.js";import{a as y,E as T}from"./element-plus-53a783a7.js";const{t:o}=I.global;function w(e=""){let l=new Set;const i=u.create({baseURL:"http://localhost:7055/interfacePlatform/",withCredentials:!0,timeout:0});return i.interceptors.request.use(t=>{t.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",t.cType&&(t.headers.userLoginName=t.data.userLoginName),t.JSON&&(t.headers["Content-Type"]="application/json");const s=m.getObjectItem(r.siteTokenKey,"access_token");return s&&(t.headers.Authorization="Bearer "+s),t.headers.Accept="*/*",t},t=>Promise.reject(t)),i.interceptors.response.use(t=>{setTimeout(()=>{l.delete(t.config.url)},600);let s;t.data?s=t.data:s=t;const{code:n}=s;if(n!==0){const f=t.config.url.split("?")[0].replace(t.config.baseURL,""),c=r.ajaxResponseNoVerifyUrl.includes(f);switch(n){case 40101:case 40101:case 40102:case 40102:case 401:c||y({title:o("提示"),showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1,message:o("当前用户登入信息已失效，请重新登入再操作"),beforeClose:(O,L,b)=>{p(r.serverLoginUrl)?window.location.href=r.serverLoginUrl:window.location.reload()}});break;case 40300:window.location.href="/interface//401";break;case 40400:window.location.href="/interface//404";break;case 5e4:return s;default:c||console.error(s.msg);break}return n===101e3?Promise.resolve(s):s}else return s},t=>(u.isCancel(t)?console.warn(t):(T({message:t.message,type:"error",duration:5*1e3}),l.delete(t.config.url),t.message.includes("401")&&y({title:o("提示"),showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1,message:o("当前用户登入信息已失效，请重新登入再操作"),beforeClose:(s,n,f)=>{if(p(r.serverLoginUrl))window.location.href=r.serverLoginUrl;else{const c={to:{path:window.location.pathname},logoutUrl:"http://localhost:7055/sso/logout?service=http://localhost:7070/interface/",__y9delete__:()=>{console.log("删除前执行的函数")}};h.ssoLogout(c)}}})),Promise.reject(t))),i}const a=d(),g=w(),U=async e=>await a({url:"/api/rest/interface/getInterfaceListByPersonId",method:"GET",cType:!1,params:e}),B=async e=>await a({url:"/api/rest/interface/getMayApplyInterfaceList",method:"GET",cType:!1,params:e}),N=async e=>await a({url:"/api/rest/interface/saveInterfaceInfo",method:"POST",JSON:!0,cType:!1,data:e}),k=async e=>await g({url:"/api/rest/interface/testInterface",method:"POST",JSON:!0,cType:!1,data:e}),v=async e=>await a({url:"/api/rest/interface/getInterfaceId",method:"GET",cType:!1,params:e}),C=async e=>await a({url:"/api/rest/interface/getInterfaceById",method:"GET",cType:!1,params:e}),G=async e=>await a({url:"/api/rest/interface/delInterfaceById",method:"GET",cType:!1,params:e}),x=async e=>await a({url:"/api/rest/interface/pubInterface",method:"POST",cType:!1,JSON:!0,data:e}),J=async e=>await a({url:"/api/rest/interface/stopInterface",method:"POST",cType:!1,JSON:!0,data:e}),_=async e=>await a({url:"/api/rest/interface/updateVersion",method:"POST",cType:!1,JSON:!0,data:e}),q=async e=>await a({url:"/api/rest/interface/getAuthListByInterfaceId",method:"GET",cType:!1,params:e}),R=async e=>await a({url:"/api/rest/interface/getAlreadyApplyInterfaceList",method:"GET",cType:!1,params:e}),j=async e=>await a({url:"/api/rest/interface/useInterfaceApply",method:"POST",cType:!1,JSON:!0,data:e}),M=async e=>await a({url:"/api/rest/interface/updateUseInterfaceApply",method:"POST",cType:!1,JSON:!0,data:e}),V=async e=>await a({url:"/api/rest/interface/getApplyInfoByInterfaceId",method:"GET",cType:!1,params:e}),$=async e=>await a({url:"/api/rest/interface/exportInterface",method:"GET",cType:!1,params:e,responseType:"blob"}),F=async e=>await a({url:e,method:"GET",cType:!1,responseType:"blob"});export{V as a,N as b,_ as c,C as d,M as e,G as f,q as g,F as h,B as i,R as j,U as k,$ as l,v as m,x as p,J as s,k as t,j as u};
